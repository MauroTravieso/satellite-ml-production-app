<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Satellite Trajectory Classification System</title>
    <link rel="stylesheet" href="assets/css/styles.css">
</head>
<body>
    <div class="stars" id="stars"></div>
    
    <div class="container">
        <header>
            <h1>üõ∞Ô∏è Satellite Trajectory Classification System</h1>
            <p class="subtitle">Advanced ML-Powered Orbital Prediction Engine with Explainability</p>
            <p style="color: #66aacc; margin-top: 10px;">Random Forest Classifier | Accuracy: 100% | F1: 1.0000</p>
            <p style="color: #66aacc; margin-top: 12px;">Mauro Travieso - Big Data Engineer</p>
        </header>

        <div class="main-content">
            <div class="panel">
                <h2><span class="icon">üìä</span>Single Prediction</h2>
                <form id="predictionForm">
                    <div class="form-group">
                        <label for="latitude">Latitude (degrees)</label>
                        <input type="number" id="latitude" step="0.0001" required 
                               min="-90" max="90"
                               placeholder="e.g., 51.6 (valid: -90 to +90)"
                               title="Latitude must be between -90¬∞ and +90¬∞">
                        <small style="color: #88ccff; font-size: 0.85em;">Valid range: -90¬∞ to +90¬∞</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="longitude">Longitude (degrees)</label>
                        <input type="number" id="longitude" step="0.0001" required 
                               min="-180" max="180"
                               placeholder="e.g., -122.0 (valid: -180 to +180)"
                               title="Longitude must be between -180¬∞ and +180¬∞">
                        <small style="color: #88ccff; font-size: 0.85em;">Valid range: -180¬∞ to +180¬∞</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="x_eci">X Position (ECI km)</label>
                        <input type="number" id="x_eci" step="0.1" required 
                               min="-50000" max="50000"
                               placeholder="e.g., 6771.5"
                               title="Typical range: -50000 to +50000 km">
                        <small style="color: #88ccff; font-size: 0.85em;">Earth-Centered Inertial coordinate</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="y_eci">Y Position (ECI km)</label>
                        <input type="number" id="y_eci" step="0.1" required 
                               min="-50000" max="50000"
                               placeholder="e.g., 100.0"
                               title="Typical range: -50000 to +50000 km">
                        <small style="color: #88ccff; font-size: 0.85em;">Earth-Centered Inertial coordinate</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="z_eci">Z Position (ECI km)</label>
                        <input type="number" id="z_eci" step="0.1" required 
                               min="-50000" max="50000"
                               placeholder="e.g., 200.0"
                               title="Typical range: -50000 to +50000 km">
                        <small style="color: #88ccff; font-size: 0.85em;">Earth-Centered Inertial coordinate</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="vel_x">Velocity X (km/s)</label>
                        <input type="number" id="vel_x" step="0.01" required 
                               min="-20" max="20"
                               placeholder="e.g., 7.5"
                               title="Typical range: -20 to +20 km/s">
                        <small style="color: #88ccff; font-size: 0.85em;">Orbital velocity component</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="vel_y">Velocity Y (km/s)</label>
                        <input type="number" id="vel_y" step="0.01" required 
                               min="-20" max="20"
                               placeholder="e.g., 0.5"
                               title="Typical range: -20 to +20 km/s">
                        <small style="color: #88ccff; font-size: 0.85em;">Orbital velocity component</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="vel_z">Velocity Z (km/s)</label>
                        <input type="number" id="vel_z" step="0.01" required 
                               min="-20" max="20"
                               placeholder="e.g., 0.3"
                               title="Typical range: -20 to +20 km/s">
                        <small style="color: #88ccff; font-size: 0.85em;">Orbital velocity component</small>
                    </div>
                    
                    <button type="submit">üöÄ Classify Satellite</button>
                    <button type="button" onclick="loadSampleData('ISS')" 
                            style="background: linear-gradient(45deg, #00ff88, #00cc66); margin-top: 10px;">
                        üìù Load ISS Sample Data
                    </button>
                    <button type="button" onclick="loadSampleData('Sentinel1A')" 
                            style="background: linear-gradient(45deg, #00d4ff, #0099ff); margin-top: 10px;">
                        üìù Load Sentinel1A Sample Data
                    </button>
                </form>
            </div>

            <div class="panel">
                <h2><span class="icon">üìÅ</span>Batch Prediction</h2>
                <div class="batch-upload" onclick="document.getElementById('csvFile').click()">
                    <div style="font-size: 3em; margin-bottom: 10px;">üì§</div>
                    <p style="color: #88ccff; font-size: 1.1em;">Click to upload CSV file</p>
                    <p style="color: #66aacc; font-size: 0.9em; margin-top: 10px;">Format: lat, lon, x_eci, y_eci, z_eci, vel_x, vel_y, vel_z</p>
                </div>
                <input type="file" id="csvFile" accept=".csv" style="display: none;">
                
                <div class="model-info">
                    <h3 style="color: #00d4ff; margin-bottom: 15px;">Model Information</h3>
                    <div class="metric">
                        <div class="metric-label">Algorithm</div>
                        <div class="metric-value">Random Forest</div>
                    </div>
                    <div class="metric">
                        <div class="metric-label">Trees</div>
                        <div class="metric-value">100</div>
                    </div>
                    <div class="metric">
                        <div class="metric-label">Max Depth</div>
                        <div class="metric-value">10</div>
                    </div>
                    <div class="metric">
                        <div class="metric-label">Classes</div>
                        <div class="metric-value">2</div>
                    </div>
                    <p style="color: #88ccff; margin-top: 15px;">
                        <strong>Satellites:</strong> ISS, Sentinel1A
                    </p>
                </div>

                <div class="performance-stats" id="performanceStats">
                    <div class="stat-box">
                        <div class="stat-value" id="totalPredictions">0</div>
                        <div class="stat-label">Total Predictions</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="avgProcessingTime">0ms</div>
                        <div class="stat-label">Avg Time</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="sessionDuration">0s</div>
                        <div class="stat-label">Session Time</div>
                    </div>
                </div>
                <button class="history-button" onclick="showHistory()">üìä View Prediction History</button>
            </div>
        </div>

        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p style="color: #88ccff; margin-top: 15px;">Processing prediction...</p>
        </div>

        <div class="panel result-panel" id="resultPanel">
            <h2><span class="icon">‚ú®</span>Prediction Results</h2>
            <div class="prediction-result">
                <div class="satellite-name" id="satelliteName">‚Äî</div>
                
                <div>
                    <label style="color: #88ccff;">Confidence Level</label>
                    <div class="confidence-bar">
                        <div class="confidence-fill" id="confidenceBar">0%</div>
                    </div>
                </div>

                <div class="feature-importance" id="featureValues"></div>

                <div class="explainability-section" id="explainabilitySection">
                    <h3>üîç Feature Contributions to Prediction</h3>
                    <p style="color: #ffcc88; margin-bottom: 15px;">
                        Top features that influenced this classification:
                    </p>
                    <div id="contributionBars"></div>
                </div>
            </div>

            <div id="batchResults"></div>
        </div>
    </div>

    <div class="modal" id="historyModal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeHistory()">&times;</span>
            <h2 style="color: #00d4ff; margin-bottom: 20px;">üìä Prediction History</h2>
            <div id="historyContent"></div>
            <button onclick="clearHistory()" style="background: linear-gradient(45deg, #ff4444, #cc0000); margin-top: 20px;">
                üóëÔ∏è Clear History
            </button>
        </div>
    </div>
    
    <div class="footer">
        <p>¬© 2025 Mauro Travieso - Satellite Trajectory Classification System | Production Deployment v1.0</p>
        <p>Models trained with PySpark on real-time ingested satellite records</p>
    </div>
    
    <script src="assets/js/app.js"></script>
</body>
</html>
